{% extends 'layout.html' %}
{% load staticfiles %}
{% block content %}
  <link rel="stylesheet" href="{% static 'css/Treant.css' %}">
  <link rel="stylesheet" href="{% static 'css/select.css' %}">
  <p>1. Choose matching step in existing tree. If matching step isn't existed, select + area</p>
  <p>2. Choose your summarization(multiple choice is possible)</p>
  <p>3. If you think summarization is weird, you can fix with your solution or just typing it</p>
  <div id="sum-outer-div" style="width:20%;float:left;">
    <p id="ee"> Your Summarization</p>
    <div id="sum-box"></div>
  </div>
  <div style="width:2%;height:10px;float:left;"></div>
  <div id="vert-line" style="width:2%;height:10px;float:left;"></div>
  <div id="div-soltree" style="width:75%"></div>
<script type="text/javascript" src = "{% static 'js/raphael.js' %}"></script>
<script type="text/javascript" src = "{% static 'js/Treant.js' %}"></script>
<script>
  var chart_config = {{chart_config|safe}};
</script>
<script type="text/javascript" src="{% static 'js/soltree.js' %}"></script>
<script type="text/javascript" src="{% static 'js/match1.js' %}"></script>
<button id="btn" style="position:absolute"onclick="go_submit();" type="submit">next</button>
<script>
  var sum_data = [];
  {% for key, value in data.items %}
    if('{{key}}'.includes('sum'))
      sum_data.push('{{value}}');
  {%endfor%}
  $("#vert-line").height(sum_data.length*100+138);
  $("#sum-outer-div").height(sum_data.length*100+130);
  $("#sum-box").height(sum_data.length*100+90);
  $("#btn").css({
    top : (sum_data.length*100 + 500)+'px',
    left : '20px'
  })
  var tree = new Treant(chart_config, null , $);
  {% for key, value in data.items %}
    if('{{key}}'.includes('sum'))
      ask_summarization('{{value}}');
  {%endfor%}
  function go_submit(){
    window.location.href = '/problem/submit/'
  }
</script>
<p></p>

<script type="text/javascript" src="{% static 'js/soltree2.js' %}"></script>
<script type="text/javascript" src="{% static 'js/select.js' %}"></script>
{% endblock %}
